<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>마이페이지</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<header>
    <h1>마이페이지</h1>
    <button onclick="location.href='/'">홈으로</button>
</header>

<main class="score-list">
    <div class="score-list-title">카테고리별 점수</div>
    <div id="scoreList"></div>
</main>
<main class="score-list">
    <button class="interview-list-button" onclick="location.href='/interviews'">인터뷰 기록 보기</button>
</main>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        loadScores();
    });

    function loadScores() {
        fetch("/api/scores", {
            method: "GET",
            credentials: "include"
        })
            .then(res => res.json())
            .then(data => renderScores(data.scores))
            .catch(() => alert("점수 정보를 불러오지 못했습니다."));
    }

    function renderScores(scores) {
        const container = document.getElementById("scoreList");
        container.innerHTML = "";

        scores.forEach(item => {
            const div = document.createElement("div");
            div.className = "score-item";

            const name = document.createElement("div");
            name.className = "score-item-name";
            name.innerText = toKorean(item.mainCategory);

            const score = document.createElement("div");
            score.className = "score-item-value";
            score.innerText = item.score + "점";

            div.appendChild(name);
            div.appendChild(score);

            div.addEventListener("click", () => {
                location.href = `/scores/${item.mainCategory}`;
            });

            container.appendChild(div);
        });
    }

    function toKorean(category) {
        switch (category) {
            case "COMPUTER_SCIENCE": return "컴퓨터 공학";
            case "BACKEND": return "백엔드";
            case "SYSTEM_DESIGN": return "시스템 설계";
            case "CULTURE_FIT": return "컬처 핏";
            default: return category;
        }
    }
</script>

</body>
</html>
